{% assign expire_timestamp = 'now' | date: '%s' | minus: 86400 %}{% assign update_timestamp = 1597687530 %}{% if expire_timestamp < update_timestamp %} (function(){ window['addEventListener'] = (function(){ var original = this['addEventListener']; return function() { if ((arguments[0] == 'load' || arguments[0] == 'theme.loaded.jquery') && arguments[1] && arguments[1].name == 'asyncLoad') { console.log("Disable asyncLoad for hyperLoad!"); } else { return original.apply(this, arguments); } } }.bind(window))(); (function() { var currentPageType = getPageType(); var hsUrls = [{"url": "https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=MiE8xm&shop=witchcraft101.myshopify.com", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "https://www.stilyoapps.com/reconvert/assets/js/store_reconvert.js?shop=witchcraft101.myshopify.com", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'lazy.js' | asset_url | split: '?' | first }}?shop=witchcraft101.myshopify.com&hs_version=1", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'loox.1566902786091.js' | asset_url | split: '?' | first }}?shop=witchcraft101.myshopify.com&hs_version=11", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'pintrk.js' | asset_url | split: '?' | first }}?shop=witchcraft101.myshopify.com&hs_version=1", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'powr.js' | asset_url | split: '?' | first }}?powr-token=witchcraft101.myshopify.com&external-type=shopify&shop=witchcraft101.myshopify.com&hs_version=7", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'scripttag.js' | asset_url | split: '?' | first }}?shop=witchcraft101.myshopify.com&hs_version=1", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'shopify-scevent.js' | asset_url | split: '?' | first }}?id=62699dcc-f791-42e9-a68f-ab024ef876af&shop=witchcraft101.myshopify.com&hs_version=1", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'shopify_rolling_bootstrap_v2.js' | asset_url | split: '?' | first }}?adroll_adv_id=FGNFQWCSLZHAHN7HQBR4JN&adroll_pix_id=JWL75OHRGJAY7PXDTX4V7M&shop=witchcraft101.myshopify.com&hs_version=1", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'teelaunch-scripts.js' | asset_url | split: '?' | first }}?shop=witchcraft101.myshopify.com&shop=witchcraft101.myshopify.com&hs_version=1", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}, {"url": "{{ 'verge-json-ld.js' | asset_url | split: '?' | first }}?shop=witchcraft101.myshopify.com&hs_version=1", "load_method": "ASYNC", "pages": ["HOME", "COLLECTIONS", "PRODUCT", "OTHER"]}]; function getPageType() { var currentPage = "{{ template.name }}"; if (currentPage === 'index') { return 'HOME'; } else if (currentPage === 'collection') { return 'COLLECTIONS'; } else if (currentPage === 'product') { return 'PRODUCT'; } else { return 'OTHER'; } } function shouldLoad(script) { return script.pages.includes(currentPageType); } function loadScriptUrls(scripts) { for (var i = 0; i < scripts.length; i++) { var script = scripts[i]; if (shouldLoad(script)) { var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = script.url; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); } } } function hyperLoad() { loadScriptUrls(hsUrls.filter(function(url) { return url.load_method === 'ASYNC'; })) } function hyperLoadOnScroll() { loadScriptUrls(hsUrls.filter(function(url) { return url.load_method === 'ON_SCROLL'; })); if (window.detachEvent) { window.detachEvent('scroll', hyperLoadOnScroll); } else { window.removeEventListener('scroll', hyperLoadOnScroll); } } if (window.attachEvent) { window.attachEvent('onload', hyperLoad); window.attachEvent('scroll', hyperLoadOnScroll); } else { window.addEventListener('load', hyperLoad, false); window.addEventListener('scroll', hyperLoadOnScroll); } })(); })(); {% endif %}